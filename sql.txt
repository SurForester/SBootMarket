-- Table: public.product

DROP TABLE IF EXISTS public.product;

CREATE TABLE IF NOT EXISTS public.product
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    title text COLLATE pg_catalog."default" NOT NULL,
    cost numeric NOT NULL,
    CONSTRAINT product_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.product
    OWNER to postgres;


-- Table: public.buyer

DROP TABLE IF EXISTS public.buyer;

CREATE TABLE IF NOT EXISTS public.buyer
(
    id bigint NOT NULL GENERATED BY DEFAULT AS IDENTITY ( INCREMENT 1 START 1 MINVALUE 1 MAXVALUE 9223372036854775807 CACHE 1 ),
    name text COLLATE pg_catalog."default" NOT NULL,
    CONSTRAINT buyer_pkey PRIMARY KEY (id)
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public.buyer
    OWNER to postgres;

COMMENT ON TABLE public.buyer
    IS 'Покупатели.';

-- Table: public.order

DROP TABLE IF EXISTS public."order";

CREATE TABLE IF NOT EXISTS public."order"
(
    id bigint NOT NULL DEFAULT nextval('order_id_seq'::regclass),
    buyer_id bigint NOT NULL,
    product_id bigint NOT NULL,
    buying_date date NOT NULL,
    buying_price numeric NOT NULL,
    CONSTRAINT order_pkey PRIMARY KEY (id),
    CONSTRAINT order_buyer_id_fkey FOREIGN KEY (buyer_id)
        REFERENCES public.buyer (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION,
    CONSTRAINT order_product_id_fkey FOREIGN KEY (product_id)
        REFERENCES public.product (id) MATCH SIMPLE
        ON UPDATE NO ACTION
        ON DELETE NO ACTION
)

TABLESPACE pg_default;

ALTER TABLE IF EXISTS public."order"
    OWNER to postgres;


COPY public.buyer (id, name) FROM stdin;
1	Вася Пупкин
2	Петр Петрович
3	Еще кто-то
\.

COPY public.product (id, title, cost) FROM stdin;
1	Product1	11.23
2	Product 22	22.33
5	bbbbbbbbb	3333
6	Колбаса	100
7	Сало	55
\.

COPY public."order" (id, buyer_id, product_id, buying_date, buying_price) FROM stdin;
1	1	1	2000-01-01	100
2	1	7	2020-08-22	50
3	1	6	2020-08-22	95
4	2	5	2021-12-21	1000
5	2	6	2021-12-22	100
6	3	1	2022-05-05	100
\.

